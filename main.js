(()=>{"use strict";const e=new class{constructor(){this.navList=["shuffle and start","stop","save","results"]}render(){const e=`\n          <ul class="header-list">\n            ${this.createNav(this.navList)}\n          </ul>\n          <div class="header-burger">\n            <div class="header-burger__line"></div>\n            <div class="header-burger__line"></div>\n            <div class="header-burger__line"></div>\n          </div>\n        `;return Promise.resolve(e)}after_render(){return Promise.resolve()}createNav(e){return e.reduce(((e,t)=>e+`\n      <li class="header-list__item setting-button"\n      data-type="${t.split(" ").pop()}";\n        data-type="${t}">\n          ${t}\n      </li>`),"")}},t=new class{constructor(){this.currentBoardSize=4,this.moves=0,this.time="00:00",this.timerView=null,this.timer=null,this.sizeItem=null,this.canvas=null,this.canvasWrap=null,this.settingButtons=null}render(){const e=`\n\n    <div class="main-container">\n      <div class="main-container__game-settings">\n      <div class="main-container__game-settings__setting">\n        <svg viewBox="24 0 16 16">\n          <path d="M40,9.5v-3h-1.8l-0.7-1.8l1.3-1.3l-2.1-2.1l-1.3,1.3l-1.9-0.8V0h-3v1.8l-1.8,0.8l-1.3-1.3l-2.1,2.1l1.3,1.3\n          l-0.8,1.8H24v3h1.8l0.7,1.8l-1.3,1.3l2.1,2.1l1.3-1.3l1.8,0.7V16h3v-1.8l1.8-0.7l1.3,1.3l2.1-2.1l-1.3-1.3L38,9.6h2V9.5z M32,12\n          c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4S34.2,12,32,12z"/>\n        </svg>\n      </div>\n        <p>Moves: <span>${this.moves}</span></p>\n        <p>Times: <span class="timer-view">${this.time}</span></p>\n      </div>\n      <div class="main-container__canvas-wrap">\n        <canvas class="canvas">\n          Браузер не поддерживает  этот элемент\n        </canvas>\n      </div>\n      <div class="main-container__board-size">\n        <p>Frame size <span class="size-view">${this.currentBoardSize}x${this.currentBoardSize}</span></p>\n      </div>\n      <div class="main-container__size-settings">\n        <ul class="main-container__size-settings__list">\n          ${this.createSizeSettingsList(3,8)}\n        </ul>\n      </div>\n    </div>\n    `;return Promise.resolve(e)}after_render(){return this.sizeItem=document.querySelectorAll(".main-container__size-settings__list__item"),this.canvas=document.querySelector(".canvas"),this.canvasWrap=document.querySelector(".main-container__canvas-wrap"),this.settingButtons=document.querySelectorAll(".setting-button"),this.timerView=document.querySelector(".timer-view"),this.sizeItem.forEach((e=>e.addEventListener("click",(e=>this.changeSizeOnClick(e))))),this.windowOnResize(),this.settingButtons.forEach((e=>e.addEventListener("click",(e=>this.buttonOnClick(e))))),Promise.resolve()}createSizeSettingsList(e,t){return[...Array(t-e+1).keys()].reduce(((t,n)=>{const i=n+e;return t+`\n      <li\n      class="main-container__size-settings__list__item${i===this.currentBoardSize?" active":""}"\n      data-size="${i}">\n        ${i}x${i}\n      </li>`}),"")}drawOnCanvas(){const e=this.canvas.getContext("2d"),t=this.canvasWrap.clientWidth/this.currentBoardSize,n=t/1.5;e.font=`${n}px serif`,e.lineWidth=4;let i=0;const s=this.createSuffleArr(this.currentBoardSize);s.push(0);for(let r=0;r<this.currentBoardSize;r++)for(let a=0;a<this.currentBoardSize;a++)if(r!==this.currentBoardSize-1||a!==this.currentBoardSize-1){const c=a*t,l=r*t;e.strokeStyle="white",e.strokeRect(c,l,t,t),e.fillStyle="black",e.fillRect(c,l,t,t),e.textAlign="center",e.fillStyle="white",e.fillText(`${s[i]+1}`,c+t/2,l+n),i+=1}}windowOnResize(){this.canvas.setAttribute("width",this.canvasWrap.clientWidth+"px"),this.canvas.setAttribute("height",this.canvasWrap.clientWidth+"px"),this.drawOnCanvas()}buttonOnClick(e){"start"===e.target.dataset.type&&this.staetGame()}staetGame(){this.sizeItem.forEach((e=>e.classList.add("blocked"))),this.timer=(e=>{let t=0,n=0,i=0;const s=setInterval((()=>{if(n+=1,60===n&&(t+=1,n=0),60===t&&(i+=1,t=0),0===i){let i=n<10?`0${n}`:n.toString(),s=t<10?`0${t}`:t.toString();e.innerHTML=`${s}:${i}`}if(i>0)if(i<10){let s=n<10?`0${n}`:n.toString(),r=t<10?`0${t}`:t.toString(),a=i<10?`0${i}`:i.toString();e.innerHTML=`${a}:${r}:${s}`}else e.innerHTML="Time out",clearInterval(s)}),1e3);return s})(this.timerView)}changeSizeOnClick(e){const t=document.querySelector(".size-view");this.sizeItem.forEach((e=>e.classList.remove("active")));const n=e.target,i=n.dataset.size;n.classList.add("active"),this.currentBoardSize=+i,t.innerHTML=`${this.currentBoardSize}x${this.currentBoardSize}`,this.windowOnResize()}createSuffleArr(e){const t=[...Array(e*e).keys()];return t.pop(),t.sort((()=>Math.random()-.5))}},n=new class{render(){return Promise.resolve('\n        <h3 class="page-name"></h3>\n        <p>In process...</p>\n        ')}after_render(){return Promise.resolve()}},i=new Map([["/",t],["**",n]]),s=()=>{return t=void 0,s=void 0,a=function*(){const t=document.querySelector("body"),s=document.createElement("header"),r=document.createElement("main"),a=document.createElement("div");a.classList.add("wrapper"),t.append(a),a.append(s,r),s.innerHTML=yield e.render(),yield e.after_render();let c=(()=>{let e=(location.hash.slice(1).toLowerCase()||"/").split("/"),t={resource:null,id:null,verb:null};return t.resource=e[1],t.id=e[2],t.verb=e[3],t})(),l=(c.resource?"/"+c.resource:"/")+(c.id?"/:id":"")+(c.verb?"/"+c.verb:""),o=i.has(l)?i.get(l):n;r.innerHTML=yield o.render(),yield o.after_render()},new((r=void 0)||(r=Promise))((function(e,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function c(e){try{l(a.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}l((a=a.apply(t,s||[])).next())}));var t,s,r,a};window.addEventListener("hashchange",s),window.addEventListener("load",s),window.addEventListener("resize",(()=>t.windowOnResize())),console.log()})();
//# sourceMappingURL=main.js.map